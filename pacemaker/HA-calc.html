

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>11. Calculations of high availability systems &mdash; PacemakerDoc 1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="PacemakerDoc 1 documentation" href="index.html"/>
        <link rel="next" title="12. ClusterIP / iptables mechanisms" href="ipt_clusterip.html"/>
        <link rel="prev" title="10. References / links" href="refs.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> PacemakerDoc
          

          
          </a>

          
            
            
              <div class="version">
                0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="pacemaker_setup.html">1. Pacemaker / fencing setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="webui.html">2. PCSD Web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="cluster-resource.html">3. Cluster Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="clustered_web.html">4. Setup clustered web servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="fence_test.html">5. Fencing test</a></li>
<li class="toctree-l1"><a class="reference internal" href="fence_case_study.html">6. Fencing case studies</a></li>
<li class="toctree-l1"><a class="reference internal" href="active_active_vip.html">7. Active/Active setup - VIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="corosync_crypto.html">8. Crypt corosync/totem messaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="Questions.html">9. Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="refs.html">10. References / links</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">11. Calculations of high availability systems</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#motivation">11.1. Motivation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#availability-calculations">11.2. Availability Calculations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#system-layout">11.2.1. System Layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="#definition-of-probability">11.2.2. Definition of probability</a></li>
<li class="toctree-l3"><a class="reference internal" href="#probability-calculations">11.2.3. Probability Calculations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ipt_clusterip.html">12. ClusterIP / iptables mechanisms</a></li>
<li class="toctree-l1"><a class="reference internal" href="group-clone.html">13. Clone resources / clone groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="pacemaker-inside.html">14. Pacemaker inside</a></li>
<li class="toctree-l1"><a class="reference internal" href="codewalk-addResource.html">15. Code Walk / Adding resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="codewalk-monitoringResource.html">16. Code-walk / Monitoring resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="words-jp.html">17. 用語説明</a></li>
<li class="toctree-l1"><a class="reference internal" href="ClusterIP_detach.html">18. Process of detaching/attaching ClusterIP in case of node/service failure</a></li>
<li class="toctree-l1"><a class="reference internal" href="pengine-crmd.html">19. Pengine - crmd</a></li>
<li class="toctree-l1"><a class="reference internal" href="cib-crmd.html">20. cib - crmd</a></li>
<li class="toctree-l1"><a class="reference internal" href="pacemaker-haproxy-setup.html">21. Active/Passive HA proxy using Pacemaker setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="cib.html">22. CIB</a></li>
<li class="toctree-l1"><a class="reference internal" href="mariadb-cluster.html">23. Setting up clustered MariaDB with Pacemaker</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">PacemakerDoc</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>11. Calculations of high availability systems</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/HA-calc.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="calculations-of-high-availability-systems">
<h1>11. Calculations of high availability systems<a class="headerlink" href="#calculations-of-high-availability-systems" title="Permalink to this headline">¶</a></h1>
<div class="section" id="motivation">
<h2>11.1. Motivation<a class="headerlink" href="#motivation" title="Permalink to this headline">¶</a></h2>
<p>HA Proxy and/or Pacemaker seem to provide us high availability of the system. But how much available? Quantitative analysis, or calculations of the availability of the system using HA Proxy and Pacemaker are shown.</p>
</div>
<div class="section" id="availability-calculations">
<h2>11.2. Availability Calculations<a class="headerlink" href="#availability-calculations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="system-layout">
<h3>11.2.1. System Layout<a class="headerlink" href="#system-layout" title="Permalink to this headline">¶</a></h3>
<p>HA Proxy x M in front and Web x N as back-end.</p>
</div>
<div class="section" id="definition-of-probability">
<h3>11.2.2. Definition of probability<a class="headerlink" href="#definition-of-probability" title="Permalink to this headline">¶</a></h3>
<p>P_HAP : Probability of HA Proxy server&#8217;s availability. (0 - 1.0) &#8216;1&#8217; means always available.</p>
<p>P_Web : Probability of back-end Web server&#8217;s availability. (0 - 1.0)</p>
</div>
<div class="section" id="probability-calculations">
<h3>11.2.3. Probability Calculations<a class="headerlink" href="#probability-calculations" title="Permalink to this headline">¶</a></h3>
<p>System is down when,</p>
<ul class="simple">
<li>(All the HA Proxies are down) or ((At least one of the HA proxy is up) and (All the Web servers are down))<ul>
<li>(All the HA Proxies are down) =&gt; (1 - P_HAP)^M</li>
<li>(At least one of the HA proxy is up) =&gt; (1 - (1 - P_HAP)^M)</li>
<li>(All the Web servers are down) =&gt; (1 - P_Web)^N</li>
</ul>
</li>
<li>So the probability of the system down equals</li>
</ul>
<div class="math">
\[(1 - P_{HAP})^M + (1 - (1 - P_{HAP})^M) x (1 - P_{Web})^N\]</div>
<ul class="simple">
<li>Availability of the system is thus,</li>
</ul>
<div class="math">
\[1 - {(1 - P_{HAP})^M + (1 - (1 - P_{HAP})^M) x (1 - P_{Web})^N}
 = (1 - (1 - P_{HAP})^M) x (1 + (1 - P_{Web})^N)\]</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ipt_clusterip.html" class="btn btn-neutral float-right" title="12. ClusterIP / iptables mechanisms" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="refs.html" class="btn btn-neutral" title="10. References / links" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 Red Hat, Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>